{"ast":null,"code":"var _jsxFileName = \"E:\\\\my projects\\\\invoice-generator-master\\\\src\\\\components\\\\InvoiceModal.jsx\";\nimport React, { Fragment } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { toPng } from 'html-to-image';\nimport { jsPDF } from 'jspdf';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst InvoiceModal = _ref => {\n  let {\n    isOpen,\n    setIsOpen,\n    invoiceInfo,\n    items,\n    onAddNextInvoice\n  } = _ref;\n\n  function closeModal() {\n    setIsOpen(false);\n  }\n\n  const addNextInvoiceHandler = () => {\n    setIsOpen(false);\n    onAddNextInvoice();\n  };\n\n  const SaveAsPDFHandler = () => {\n    const dom = document.getElementById('print');\n    toPng(dom).then(dataUrl => {\n      const img = new Image();\n      img.crossOrigin = 'annoymous';\n      img.src = dataUrl;\n\n      img.onload = () => {\n        // Initialize the PDF.\n        const pdf = new jsPDF({\n          orientation: 'portrait',\n          unit: 'in',\n          format: [5.5, 8.5]\n        }); // Define reused data\n\n        const imgProps = pdf.getImageProperties(img);\n        const imageType = imgProps.fileType;\n        const pdfWidth = pdf.internal.pageSize.getWidth(); // Calculate the number of pages.\n\n        const pxFullHeight = imgProps.height;\n        const pxPageHeight = Math.floor(imgProps.width * 8.5 / 5.5);\n        const nPages = Math.ceil(pxFullHeight / pxPageHeight); // Define pageHeight separately so it can be trimmed on the final page.\n\n        let pageHeight = pdf.internal.pageSize.getHeight(); // Create a one-page canvas to split up the full image.\n\n        const pageCanvas = document.createElement('canvas');\n        const pageCtx = pageCanvas.getContext('2d');\n        pageCanvas.width = imgProps.width;\n        pageCanvas.height = pxPageHeight;\n\n        for (let page = 0; page < nPages; page++) {\n          // Trim the final page to reduce file size.\n          if (page === nPages - 1 && pxFullHeight % pxPageHeight !== 0) {\n            pageCanvas.height = pxFullHeight % pxPageHeight;\n            pageHeight = pageCanvas.height * pdfWidth / pageCanvas.width;\n          } // Display the page.\n\n\n          const w = pageCanvas.width;\n          const h = pageCanvas.height;\n          pageCtx.fillStyle = 'white';\n          pageCtx.fillRect(0, 0, w, h);\n          pageCtx.drawImage(img, 0, page * pxPageHeight, w, h, 0, 0, w, h); // Add the page to the PDF.\n\n          if (page) pdf.addPage();\n          const imgData = pageCanvas.toDataURL(`image/${imageType}`, 1);\n          pdf.addImage(imgData, imageType, 0, 0, pdfWidth, pageHeight);\n        } // Output / Save\n\n\n        pdf.save(`invoice-${invoiceInfo.invoiceNumber}.pdf`);\n      };\n    }).catch(error => {\n      console.error('oops, something went wrong!', error);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Transition, {\n    appear: true,\n    show: isOpen,\n    as: Fragment,\n    children: /*#__PURE__*/_jsxDEV(Dialog, {\n      as: \"div\",\n      className: \"fixed inset-0 z-10 overflow-y-auto\",\n      onClose: closeModal,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"min-h-screen px-4 text-center\",\n        children: [/*#__PURE__*/_jsxDEV(Transition.Child, {\n          as: Fragment,\n          enter: \"ease-out duration-300\",\n          enterFrom: \"opacity-0\",\n          enterTo: \"opacity-100\",\n          leave: \"ease-in duration-200\",\n          leaveFrom: \"opacity-100\",\n          leaveTo: \"opacity-0\",\n          children: /*#__PURE__*/_jsxDEV(Dialog.Overlay, {\n            className: \"fixed inset-0 bg-black/50\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 101,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 92,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"inline-block h-screen align-middle\",\n          \"aria-hidden\": \"true\",\n          children: \"\\u200B\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Transition.Child, {\n          as: Fragment,\n          enter: \"ease-out duration-300\",\n          enterFrom: \"opacity-0 scale-95\",\n          enterTo: \"opacity-100 scale-100\",\n          leave: \"ease-in duration-200\",\n          leaveFrom: \"opacity-100 scale-100\",\n          leaveTo: \"opacity-0 scale-95\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"my-8 inline-block w-full max-w-md transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4\",\n              id: \"print\",\n              children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n                className: \"text-center text-lg font-bold text-gray-900\",\n                children: \"INVOICE\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 122,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-6\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mb-4 grid grid-cols-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-bold\",\n                    children: \"Invoice Number:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 127,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: invoiceInfo.invoiceNumber\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 128,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-bold\",\n                    children: \"Cashier:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 129,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: invoiceInfo.cashierName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 130,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"font-bold\",\n                    children: \"Customer:\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 131,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: invoiceInfo.customerName\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 132,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 126,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"table\", {\n                  className: \"w-full text-left\",\n                  children: [/*#__PURE__*/_jsxDEV(\"thead\", {\n                    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n                      className: \"border-y border-black/10 text-sm md:text-base\",\n                      children: [/*#__PURE__*/_jsxDEV(\"th\", {\n                        children: \"ITEM\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 138,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-center\",\n                        children: \"QTY\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 139,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-right\",\n                        children: \"PRICE\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 140,\n                        columnNumber: 25\n                      }, this), /*#__PURE__*/_jsxDEV(\"th\", {\n                        className: \"text-right\",\n                        children: \"AMOUNT\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 141,\n                        columnNumber: 25\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 137,\n                      columnNumber: 23\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 136,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"tbody\", {\n                    children: items.map(item => /*#__PURE__*/_jsxDEV(\"tr\", {\n                      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"w-full\",\n                        children: item.name\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 147,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"min-w-[50px] text-center\",\n                        children: item.qty\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 148,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"min-w-[80px] text-right\",\n                        children: [\"$\", Number(item.price).toFixed(2)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 151,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n                        className: \"min-w-[90px] text-right\",\n                        children: [\"$\", Number(item.price * item.qty).toFixed(2)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 154,\n                        columnNumber: 27\n                      }, this)]\n                    }, item.id, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 146,\n                      columnNumber: 25\n                    }, this))\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 144,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 135,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"mt-4 flex flex-col items-end space-y-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex w-full justify-between border-t border-black/10 pt-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-bold\",\n                      children: \"Subtotal:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 164,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"$\", invoiceInfo.subtotal.toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 165,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 163,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex w-full justify-between\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-bold\",\n                      children: \"Discount:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 168,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"$\", invoiceInfo.discountRate.toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 169,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 167,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex w-full justify-between\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-bold\",\n                      children: \"Tax:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 172,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      children: [\"$\", invoiceInfo.taxRate.toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 173,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 171,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"flex w-full justify-between border-t border-black/10 py-2\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-bold\",\n                      children: \"Total:\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 176,\n                      columnNumber: 23\n                    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"font-bold\",\n                      children: [\"$\", invoiceInfo.total % 1 === 0 ? invoiceInfo.total : invoiceInfo.total.toFixed(2)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 177,\n                      columnNumber: 23\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 175,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 162,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 125,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 121,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-4 flex space-x-2 px-4 pb-6\",\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                className: \"flex w-full items-center justify-center space-x-1 rounded-md border border-blue-500 py-2 text-sm text-blue-500 shadow-sm hover:bg-blue-500 hover:text-white\",\n                onClick: SaveAsPDFHandler,\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  className: \"h-4 w-4\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Download\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 206,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 188,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                onClick: addNextInvoiceHandler,\n                className: \"flex w-full items-center justify-center space-x-1 rounded-md bg-blue-500 py-2 text-sm text-white shadow-sm hover:bg-blue-600\",\n                children: [/*#__PURE__*/_jsxDEV(\"svg\", {\n                  xmlns: \"http://www.w3.org/2000/svg\",\n                  className: \"h-4 w-4\",\n                  fill: \"none\",\n                  viewBox: \"0 0 24 24\",\n                  stroke: \"currentColor\",\n                  children: /*#__PURE__*/_jsxDEV(\"path\", {\n                    strokeLinecap: \"round\",\n                    strokeLinejoin: \"round\",\n                    strokeWidth: 2,\n                    d: \"M13 5l7 7-7 7M5 5l7 7-7 7\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 219,\n                    columnNumber: 21\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 212,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  children: \"Next\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 226,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 208,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 187,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 120,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n\n_c = InvoiceModal;\nexport default InvoiceModal;\n\nvar _c;\n\n$RefreshReg$(_c, \"InvoiceModal\");","map":{"version":3,"sources":["E:/my projects/invoice-generator-master/src/components/InvoiceModal.jsx"],"names":["React","Fragment","Dialog","Transition","toPng","jsPDF","InvoiceModal","isOpen","setIsOpen","invoiceInfo","items","onAddNextInvoice","closeModal","addNextInvoiceHandler","SaveAsPDFHandler","dom","document","getElementById","then","dataUrl","img","Image","crossOrigin","src","onload","pdf","orientation","unit","format","imgProps","getImageProperties","imageType","fileType","pdfWidth","internal","pageSize","getWidth","pxFullHeight","height","pxPageHeight","Math","floor","width","nPages","ceil","pageHeight","getHeight","pageCanvas","createElement","pageCtx","getContext","page","w","h","fillStyle","fillRect","drawImage","addPage","imgData","toDataURL","addImage","save","invoiceNumber","catch","error","console","cashierName","customerName","map","item","name","qty","Number","price","toFixed","id","subtotal","discountRate","taxRate","total"],"mappings":"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","sourcesContent":["import React, { Fragment } from 'react';\nimport { Dialog, Transition } from '@headlessui/react';\nimport { toPng } from 'html-to-image';\nimport { jsPDF } from 'jspdf';\n\nconst InvoiceModal = ({\n  isOpen,\n  setIsOpen,\n  invoiceInfo,\n  items,\n  onAddNextInvoice,\n}) => {\n  function closeModal() {\n    setIsOpen(false);\n  }\n\n  const addNextInvoiceHandler = () => {\n    setIsOpen(false);\n    onAddNextInvoice();\n  };\n\n  const SaveAsPDFHandler = () => {\n    const dom = document.getElementById('print');\n    toPng(dom)\n      .then((dataUrl) => {\n        const img = new Image();\n        img.crossOrigin = 'annoymous';\n        img.src = dataUrl;\n        img.onload = () => {\n          // Initialize the PDF.\n          const pdf = new jsPDF({\n            orientation: 'portrait',\n            unit: 'in',\n            format: [5.5, 8.5],\n          });\n\n          // Define reused data\n          const imgProps = pdf.getImageProperties(img);\n          const imageType = imgProps.fileType;\n          const pdfWidth = pdf.internal.pageSize.getWidth();\n\n          // Calculate the number of pages.\n          const pxFullHeight = imgProps.height;\n          const pxPageHeight = Math.floor((imgProps.width * 8.5) / 5.5);\n          const nPages = Math.ceil(pxFullHeight / pxPageHeight);\n\n          // Define pageHeight separately so it can be trimmed on the final page.\n          let pageHeight = pdf.internal.pageSize.getHeight();\n\n          // Create a one-page canvas to split up the full image.\n          const pageCanvas = document.createElement('canvas');\n          const pageCtx = pageCanvas.getContext('2d');\n          pageCanvas.width = imgProps.width;\n          pageCanvas.height = pxPageHeight;\n\n          for (let page = 0; page < nPages; page++) {\n            // Trim the final page to reduce file size.\n            if (page === nPages - 1 && pxFullHeight % pxPageHeight !== 0) {\n              pageCanvas.height = pxFullHeight % pxPageHeight;\n              pageHeight = (pageCanvas.height * pdfWidth) / pageCanvas.width;\n            }\n            // Display the page.\n            const w = pageCanvas.width;\n            const h = pageCanvas.height;\n            pageCtx.fillStyle = 'white';\n            pageCtx.fillRect(0, 0, w, h);\n            pageCtx.drawImage(img, 0, page * pxPageHeight, w, h, 0, 0, w, h);\n\n            // Add the page to the PDF.\n            if (page) pdf.addPage();\n\n            const imgData = pageCanvas.toDataURL(`image/${imageType}`, 1);\n            pdf.addImage(imgData, imageType, 0, 0, pdfWidth, pageHeight);\n          }\n          // Output / Save\n          pdf.save(`invoice-${invoiceInfo.invoiceNumber}.pdf`);\n        };\n      })\n      .catch((error) => {\n        console.error('oops, something went wrong!', error);\n      });\n  };\n\n  return (\n    <Transition appear show={isOpen} as={Fragment}>\n      <Dialog\n        as=\"div\"\n        className=\"fixed inset-0 z-10 overflow-y-auto\"\n        onClose={closeModal}\n      >\n        <div className=\"min-h-screen px-4 text-center\">\n          <Transition.Child\n            as={Fragment}\n            enter=\"ease-out duration-300\"\n            enterFrom=\"opacity-0\"\n            enterTo=\"opacity-100\"\n            leave=\"ease-in duration-200\"\n            leaveFrom=\"opacity-100\"\n            leaveTo=\"opacity-0\"\n          >\n            <Dialog.Overlay className=\"fixed inset-0 bg-black/50\" />\n          </Transition.Child>\n\n          {/* This element is to trick the browser into centering the modal contents. */}\n          <span\n            className=\"inline-block h-screen align-middle\"\n            aria-hidden=\"true\"\n          >\n            &#8203;\n          </span>\n          <Transition.Child\n            as={Fragment}\n            enter=\"ease-out duration-300\"\n            enterFrom=\"opacity-0 scale-95\"\n            enterTo=\"opacity-100 scale-100\"\n            leave=\"ease-in duration-200\"\n            leaveFrom=\"opacity-100 scale-100\"\n            leaveTo=\"opacity-0 scale-95\"\n          >\n            <div className=\"my-8 inline-block w-full max-w-md transform overflow-hidden rounded-lg bg-white text-left align-middle shadow-xl transition-all\">\n              <div className=\"p-4\" id=\"print\">\n                <h1 className=\"text-center text-lg font-bold text-gray-900\">\n                  INVOICE\n                </h1>\n                <div className=\"mt-6\">\n                  <div className=\"mb-4 grid grid-cols-2\">\n                    <span className=\"font-bold\">Invoice Number:</span>\n                    <span>{invoiceInfo.invoiceNumber}</span>\n                    <span className=\"font-bold\">Cashier:</span>\n                    <span>{invoiceInfo.cashierName}</span>\n                    <span className=\"font-bold\">Customer:</span>\n                    <span>{invoiceInfo.customerName}</span>\n                  </div>\n\n                  <table className=\"w-full text-left\">\n                    <thead>\n                      <tr className=\"border-y border-black/10 text-sm md:text-base\">\n                        <th>ITEM</th>\n                        <th className=\"text-center\">QTY</th>\n                        <th className=\"text-right\">PRICE</th>\n                        <th className=\"text-right\">AMOUNT</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      {items.map((item) => (\n                        <tr key={item.id}>\n                          <td className=\"w-full\">{item.name}</td>\n                          <td className=\"min-w-[50px] text-center\">\n                            {item.qty}\n                          </td>\n                          <td className=\"min-w-[80px] text-right\">\n                            ${Number(item.price).toFixed(2)}\n                          </td>\n                          <td className=\"min-w-[90px] text-right\">\n                            ${Number(item.price * item.qty).toFixed(2)}\n                          </td>\n                        </tr>\n                      ))}\n                    </tbody>\n                  </table>\n\n                  <div className=\"mt-4 flex flex-col items-end space-y-2\">\n                    <div className=\"flex w-full justify-between border-t border-black/10 pt-2\">\n                      <span className=\"font-bold\">Subtotal:</span>\n                      <span>${invoiceInfo.subtotal.toFixed(2)}</span>\n                    </div>\n                    <div className=\"flex w-full justify-between\">\n                      <span className=\"font-bold\">Discount:</span>\n                      <span>${invoiceInfo.discountRate.toFixed(2)}</span>\n                    </div>\n                    <div className=\"flex w-full justify-between\">\n                      <span className=\"font-bold\">Tax:</span>\n                      <span>${invoiceInfo.taxRate.toFixed(2)}</span>\n                    </div>\n                    <div className=\"flex w-full justify-between border-t border-black/10 py-2\">\n                      <span className=\"font-bold\">Total:</span>\n                      <span className=\"font-bold\">\n                        $\n                        {invoiceInfo.total % 1 === 0\n                          ? invoiceInfo.total\n                          : invoiceInfo.total.toFixed(2)}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"mt-4 flex space-x-2 px-4 pb-6\">\n                <button\n                  className=\"flex w-full items-center justify-center space-x-1 rounded-md border border-blue-500 py-2 text-sm text-blue-500 shadow-sm hover:bg-blue-500 hover:text-white\"\n                  onClick={SaveAsPDFHandler}\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    className=\"h-4 w-4\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\"\n                    />\n                  </svg>\n                  <span>Download</span>\n                </button>\n                <button\n                  onClick={addNextInvoiceHandler}\n                  className=\"flex w-full items-center justify-center space-x-1 rounded-md bg-blue-500 py-2 text-sm text-white shadow-sm hover:bg-blue-600\"\n                >\n                  <svg\n                    xmlns=\"http://www.w3.org/2000/svg\"\n                    className=\"h-4 w-4\"\n                    fill=\"none\"\n                    viewBox=\"0 0 24 24\"\n                    stroke=\"currentColor\"\n                  >\n                    <path\n                      strokeLinecap=\"round\"\n                      strokeLinejoin=\"round\"\n                      strokeWidth={2}\n                      d=\"M13 5l7 7-7 7M5 5l7 7-7 7\"\n                    />\n                  </svg>\n                  <span>Next</span>\n                </button>\n              </div>\n            </div>\n          </Transition.Child>\n        </div>\n      </Dialog>\n    </Transition>\n  );\n};\n\nexport default InvoiceModal;\n"]},"metadata":{},"sourceType":"module"}